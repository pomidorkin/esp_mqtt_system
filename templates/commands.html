{% extends "base.html" %}

{% block title %}–ö–æ–º–∞–Ω–¥—ã - ESP Manager{% endblock %}
{% block header %}‚ö° –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥{% endblock %}
{% block subtitle %}–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ —á–µ—Ä–µ–∑ MQTT –∫–æ–º–∞–Ω–¥—ã{% endblock %}

{% block content %}
<div class="command-panel">
    <div class="device-selector">
        <label for="device-select">–í—ã–±–µ—Ä–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:</label>
        <select id="device-select" onchange="updateCommandPanel()">
            <option value="">-- –í—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ --</option>
        </select>
    </div>

    <div class="quick-commands">
        <h3>üöÄ –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã</h3>
        <div class="command-grid">
            <button class="cmd-btn" onclick="sendCommand('STATUS')">üì° –°—Ç–∞—Ç—É—Å</button>
            <button class="cmd-btn" onclick="sendCommand('RESTART')">üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞</button>
            <button class="cmd-btn" onclick="sendCommand('RESET')">üóëÔ∏è –°–±—Ä–æ—Å</button>
            <button class="cmd-btn" onclick="sendCommand('GET_CONFIG')">‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</button>
        </div>
    </div>

    <div class="custom-command">
        <h3>üîß –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞</h3>
        <div class="command-form">
            <input type="text" id="custom-command" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É..." class="command-input">
            <button onclick="sendCustomCommand()" class="btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </div>
    </div>

    <div class="command-history">
        <h3>üìú –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–∞–Ω–¥</h3>
        <div id="command-history" class="history-list"></div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function updateCommandPanel() {
    const deviceId = document.getElementById('device-select').value;
    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
}

function sendCustomCommand() {
    const command = document.getElementById('custom-command').value;
    if (command) {
        sendCommand(command);
        document.getElementById('custom-command').value = '';
    }
}
</script>
{% endblock %}